import './polyfills.server.mjs';
import{a as E}from"./chunk-MUGL7ENK.mjs";import{j as W,m as B,q as Y}from"./chunk-A54HIVKK.mjs";import{Ab as P,Cb as u,Db as N,Eb as q,Fa as _,Fb as V,Ia as n,Lb as h,Ma as y,Ra as f,T as C,Ub as A,Wb as $,Xb as x,Y as S,Z as T,ea as d,fb as b,gb as v,ia as R,jb as I,kb as H,lb as c,m as D,mb as r,nb as a,ob as m,rb as M,sb as p,tb as g,uc as w,w as F,wb as L,xb as Q,yb as j}from"./chunk-OC75U52M.mjs";import"./chunk-N7QBYMCK.mjs";var X=(o,i)=>({"bg-yellow-500 text-black font-semibold":o,"hover:bg-yellow-500 hover:text-black":i}),Z=(o,i)=>i.slug;function ee(o,i){if(o&1){let t=M();r(0,"li")(1,"a",8),p("click",function(){let l=S(t).$implicit,s=g();return T(s.handleClick(l.slug))}),u(2),a()()}if(o&2){let t=i.$implicit,e=i.$index,l=g();n(),c("ngClass",h(3,X,t.slug===l.activeModuleSlug(),t.slug!==l.activeModuleSlug())),n(),V(" ",e+1,". ",t.title," ")}}var k=class o{course=x.required();moduleSlugOutput=$();activeModuleSlug=d("");hasInitialized=!1;constructor(){A(()=>{let i=this.course();!this.hasInitialized&&i.slug&&(this.activeModuleSlug.set(i.modules[0].slug),this.moduleSlugOutput.emit(this.activeModuleSlug()),this.hasInitialized=!0)})}handleClick(i){this.activeModuleSlug.set(i),this.moduleSlugOutput.emit(i)}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=f({type:o,selectors:[["app-sidebar"]],inputs:{course:[1,"course"]},outputs:{moduleSlugOutput:"moduleSlugOutput"},decls:15,vars:1,consts:[[1,"w-64","bg-gray-900","text-white","p-6","flex","flex-col"],[1,"text-2xl","font-bold","text-yellow-600","mb-6"],[1,"flex-1","overflow-auto","un-scroll-hidden"],[1,"space-y-2"],["routerLink","/",1,"block","font-bold","text-white","hover:bg-yellow-500","hover:text-black","p-2","rounded-md","transition"],[1,"list-none","scroll-auto"],[1,"my-6","border-gray-700"],[1,"text-sm","text-gray-400"],[1,"block","px-2","py-1","rounded","transition","cursor-pointer",3,"click","ngClass"]],template:function(t,e){t&1&&(r(0,"nav",0)(1,"h2",1),u(2),a(),r(3,"div",2)(4,"ul",3)(5,"li")(6,"a",4),u(7,"Formations"),a()(),r(8,"ul",5),I(9,ee,3,6,"li",null,Z),a()()(),r(11,"div"),m(12,"hr",6),r(13,"div",7),u(14," \xA9 2025 Young African Computer science "),a()()()),t&2&&(n(2),N(e.course().title),n(7),H(e.course().modules))},dependencies:[Y,w],styles:["nav[_ngcontent-%COMP%]{min-height:calc(100vh - 65px);max-height:calc(100vh - 65px)}@media (max-width: 690px){nav[_ngcontent-%COMP%]{min-height:calc(100vh - 120px);max-height:calc(100vh - 120px)}}li[_ngcontent-%COMP%]{padding:2px 4px;margin:10px 2px}.un-scroll-hidden[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.un-scroll-hidden[_ngcontent-%COMP%]{scrollbar-width:none}.un-scroll-hidden[_ngcontent-%COMP%]{-ms-overflow-style:none}"]})};var te=["dynamicForm"],z=(o,i)=>({"text-black bg-yellow-500 border-2 rounded-md border-yellow-500":o,"text-white border-2 hover:text-yellow-500":i});function ie(o,i){if(o&1&&m(0,"div",7),o&2){let t,e=g();c("innerHTML",(t=e.content())==null?null:t.Tutoriels,_)}}function oe(o,i){if(o&1&&(r(0,"p",9),u(1),a()),o&2){let t=g(2);n(),q(" ",t.foundResponse()," ")}}function ne(o,i){if(o&1){let t=M();r(0,"div",8),b(1,oe,2,1,"p",9),r(2,"form",10,0),p("submit",function(l){S(t);let s=g();return T(s.handleSubmit(l))}),m(4,"div",11),r(5,"button",12),u(6,"Submit"),a()()()}if(o&2){let t=g();n(),v(t.foundResponse()!==null?1:-1),n(3),c("innerHTML",t.sanitizedQCM,_)}}function re(o,i){if(o&1&&(r(0,"div",8),m(1,"div",11),a()),o&2){let t,e=g();n(),c("innerHTML",(t=e.content())==null?null:t.Exercices,_)}}function le(o,i){if(o&1&&(r(0,"div",8),m(1,"div",11),a()),o&2){let t,e=g();n(),c("innerHTML",(t=e.content())==null?null:t.Projets,_)}}var O=class o{constructor(i){this.sanitizer=i}content=x();moduleSlug=x();courseSlug=x();answersResult={};courseService=C(E);sanitizedQCMHtml;foundResponse=d(null);activeTab="theory";formRef;get sanitizedQCM(){return this.sanitizedQCMHtml}ngOnChanges(i){i.content&&(this.sanitizedQCMHtml=this.sanitizer.bypassSecurityTrustHtml(this.content()?.QCM||"")),this.foundResponse.set(null),this.activeTab="theory",this.scrollToTop()}scrollToTop(){document.getElementById("quiz-top")?.scrollIntoView({behavior:"smooth"})}handleSubmit(i){i.preventDefault();let t=this.formRef.nativeElement,e=new FormData(t),l={};e.forEach((s,U)=>{l[U]=s.toString()}),this.courseService.submitQuizAnswers(this.courseSlug(),this.moduleSlug(),l).subscribe({next:s=>{this.answersResult=s,this.markCorrections(),this.foundResponse.set("Vous avez trouv\xE9 "+this.answersResult.total.true+" bonnes r\xE9ponses sur "+this.answersResult.total.total+".")},error:s=>{console.error("Erreur lors de la correction QCM :",s)}}),this.scrollToTop()}markCorrections(){Object.entries(this.answersResult.response).forEach(([i,t])=>{let e=this.formRef.nativeElement.querySelector(`input[name="${i}"]`);if(e){let l=e.closest("label");if(l){let s=l.previousElementSibling;for(;s&&s.tagName!=="P";)s=s.previousElementSibling;s&&s.tagName==="P"&&(s.classList.remove("responseFalse"),s.classList.remove("responseTrue"),s.classList.add(t?"responseTrue":"responseFalse"))}}})}static \u0275fac=function(t){return new(t||o)(y(W))};static \u0275cmp=f({type:o,selectors:[["app-module-tabs"]],viewQuery:function(t,e){if(t&1&&L(te,5),t&2){let l;Q(l=j())&&(e.formRef=l.first)}},inputs:{content:[1,"content"],moduleSlug:[1,"moduleSlug"],courseSlug:[1,"courseSlug"]},features:[R],decls:22,vars:20,consts:[["dynamicForm",""],[1,"moduleTabComponent"],[1,"moduleNavDiv","pl-4","pr-4","mb-[20px]"],[1,"flex","flex-1","justify-center","md:justify-around","items-center","gap-2","flex-row","flex-wrap","md:flex-row","mb-1","border-gray-400","border-1","p-4","bg-gray-900"],[1,"py-2","px-2","font-semibold","cursor-pointer",3,"click","ngClass"],[1,"p-4","moduleLectureDiv","overflow-auto"],["id","quiz-top"],[1,"prose",3,"innerHTML"],[1,"prose"],[1,"text-green-700","font-bold","text-xl","p-8"],["novalidate","","autocomplete","off",3,"submit"],[3,"innerHTML"],["type","submit",1,"mt-4","px-4","py-2","bg-yellow-500","cursor-pointer","text-black","hover:text-yellow-500","font-extrabold","hover:bg-gray-900","rounded"]],template:function(t,e){t&1&&(m(0,"head"),r(1,"div",1)(2,"div",2)(3,"ul",3)(4,"li")(5,"button",4),p("click",function(){return e.activeTab="theory"}),u(6," Th\xE9orie "),a()(),r(7,"li")(8,"button",4),p("click",function(){return e.activeTab="quiz"}),u(9," QCM "),a()(),r(10,"li")(11,"button",4),p("click",function(){return e.activeTab="exercises"}),u(12," Exercices "),a()(),r(13,"li")(14,"button",4),p("click",function(){return e.activeTab="projects"}),u(15," Projets "),a()()()(),r(16,"div",5),m(17,"div",6),b(18,ie,1,1,"div",7),b(19,ne,7,2,"div",8),b(20,re,2,1,"div",8),b(21,le,2,1,"div",8),a()()),t&2&&(n(5),c("ngClass",h(8,z,e.activeTab==="theory",e.activeTab!=="theory")),n(3),c("ngClass",h(11,z,e.activeTab==="quiz",e.activeTab!=="quiz")),n(3),c("ngClass",h(14,z,e.activeTab==="exercises",e.activeTab!=="exercises")),n(3),c("ngClass",h(17,z,e.activeTab==="projects",e.activeTab!=="projects")),n(4),v(e.activeTab==="theory"?18:-1),n(),v(e.activeTab==="quiz"?19:-1),n(),v(e.activeTab==="exercises"?20:-1),n(),v(e.activeTab==="projects"?21:-1))},dependencies:[w],styles:[`.prose img{max-width:50vw;max-height:30vh;object-fit:contain;margin-bottom:20px}.prose header{border-bottom:1px solid #d1d5db;padding-bottom:16px;margin-bottom:24px}.prose header h1{font-size:1.5rem;font-weight:700;color:#000;margin-bottom:4px}.prose h2{font-size:1.5rem;font-weight:700;color:#000;margin-bottom:5px}.prose h3{font-size:1rem;font-weight:700;color:#000;margin-bottom:2px}.prose header p{font-size:.875rem;color:#6b7280}.prose form{display:flex;flex-direction:column;gap:0px}.prose label{font-weight:500;margin-bottom:8px}.prose .options{margin-left:16px}.prose .options label{display:block;margin-bottom:4px;font-weight:400}.prose .submit-container{text-align:center}.prose .submit-container button:hover{background-color:#ff0}.prose{background-color:#fff;color:#000;font-family:Arial,sans-serif;padding:20px;line-height:1.6}.prose h2{color:#daa520;margin-bottom:20px}.prose h3{margin-top:30px;color:#daa520}.prose hr{margin:15px 0;background-color:#6b7280}.prose li a{margin:15px 0;color:#daa520;font-weight:bolder}.prose pre{background-color:#f0f0f0;padding:10px 15px;border-radius:5px;font-family:monospace;max-width:600px;white-space:pre-wrap;margin:10px 0}.prose code{background-color:#eee;padding:2px 4px;border-radius:3px}.prose .responseFalse{background-color:#fecaca}.prose .responseTrue{background-color:#bbf7d0}.moduleTabComponent{min-height:calc(100vh - 90px);max-height:calc(100vh - 90px)}.moduleLectureDiv{min-height:calc(100vh - 190px);max-height:calc(100vh - 190px)}.moduleNavDiv{min-height:80px;max-height:80px}@media (max-width: 690px){.moduleTabComponent{min-height:calc(100vh - 173px);max-height:calc(100vh - 173px)}.moduleLectureDiv{min-height:calc(100vh - 275px);max-height:calc(100vh - 275px)}.moduleNavDiv{min-height:80px;max-height:80px}}
`],encapsulation:2})};var K=class o{constructor(i){this.route=i}courseSlug=d("");courseService=C(E);cours=d({});modules=d({});selectedModule=d({});selectedModuleData=d({});sidebarOpen=d(!1);screenIsSmall=d(!1);toggleSidebar(){this.sidebarOpen.update(i=>!i)}handleSelectedModule(i){var t=this.modules().find(e=>e.slug===this.courseSlug());this.selectedModule.set(t.modules.find(e=>e.slug===i)),this.courseService.getCourseModuleDataHTML(this.courseSlug(),this.selectedModule().slug,this.selectedModule().sections).pipe(F(e=>(console.error(e),D(()=>e)))).subscribe(e=>{this.selectedModuleData.set(e)})}ngOnInit(){this.courseSlug.set(this.route.snapshot.paramMap.get("courseSlug")),this.courseService.getAllCoursAPI().pipe(F(i=>(console.error(i),D(()=>i)))).subscribe(i=>{this.modules.set(i),this.cours.set(this.modules().find(t=>t.slug===this.courseSlug()))}),this.screenIsSmall.set(window.innerWidth<768),window.addEventListener("resize",()=>{this.screenIsSmall.set(window.innerWidth<768)})}static \u0275fac=function(t){return new(t||o)(y(B))};static \u0275cmp=f({type:o,selectors:[["app-cours-layout"]],decls:9,vars:6,consts:[[1,"flex","coursComponent"],[3,"moduleSlugOutput","course"],["id","content",1,"flex-1","bg-gray-50"],[1,"flex","items-center","pl-5","pt-5","pb-[5px]"],["id","sidebarToggle","aria-label","Toggle sidebar",1,"md:hidden","mr-4","text-yellow-500","text-xl","cursor-pointer",3,"click"],[3,"content","courseSlug","moduleSlug"]],template:function(t,e){t&1&&(r(0,"body")(1,"div",0)(2,"div")(3,"app-sidebar",1),p("moduleSlugOutput",function(s){return e.handleSelectedModule(s)}),a()(),r(4,"div",2)(5,"header",3)(6,"button",4),p("click",function(){return e.toggleSidebar()}),u(7,"\u2630"),a()(),m(8,"app-module-tabs",5),a()()()),t&2&&(n(2),P("hidden",!e.sidebarOpen()&&e.screenIsSmall()),n(),c("course",e.cours()),n(5),c("content",e.selectedModuleData())("courseSlug",e.courseSlug())("moduleSlug",e.selectedModule().slug))},dependencies:[k,O],encapsulation:2})};export{K as Cours};
